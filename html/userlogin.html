<!DOCTYPE html>
<html>
<head style="height: 100%;">
	<title>Tugas 3 - 05111840000080</title>

	<!-- CSS only -->
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">

</head>
<body class="bg-dark" style="height: 100%;">
    <!-- php -->
	<?php
		$msg = (isset($_GET['pesan']))? $_GET['pesan'] : "";
	    $username = (isset($_GET['user']))? $_GET['user'] : "";
	?>
	<div class="container w-50" style="margin-top: 15%;">
		<h1 class="d-flex justify-content-center display-4 text-light">Enter Username</h1>
		<p class="d-flex justify-content-center text-light" id="msg"></p>
		<form method="post" action="login.php">
			<div class="form-group d-flex justify-content-center">
				<input class="form-control w-50" id="uname" type="text" name="username" placeholder="Enter username">
			</div>
			<div class="form-group d-flex justify-content-center">
				<input type="submit" value="LOGIN" class="btn btn-success center" style="display: block;">
			</div>
			<div class="form-group d-flex justify-content-center">
				<button type="button" onclick="signUpClicked()" class="btn btn-info center">SIGN UP</button>
			</div>
		</form>

	</div>
    
<!-- JS, Popper.js, and jQuery -->
<script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
    <script type="text/javascript">
        var user = "<?php echo $username; ?>";
        var usernameField = document.getElementById("uname");
        var msg = document.getElementById("msg");
		var phpmsg = "<?php echo $msg; ?>";
		msg.innerHTML = (phpmsg == "gagal")? "Username not found. Sign up for free :)" : "";
		usernameField.value = user;

        function signUpClicked(){
            user = usernameField.value;
            if(user == ""){
                msg.innerHTML = "Username can't be blank.";
                return;
            }
            
            $.ajax({
                type: "POST",
                url: "pass.php",
                data: {username: user}
            });

            window.location.replace("pass.php");
        }
    </script>
</body>
</html>